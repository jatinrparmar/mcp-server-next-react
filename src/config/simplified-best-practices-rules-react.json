{
  "meta": {
    "framework": "React",
    "version": "2025.1",
    "type": "simplified-best-practices-config",
    "description": "SIMPLIFIED BEST PRACTICES - Modify this file only. Rules are auto-generated to rules/ directory.",
    "instructions": "Edit rules below, then run: npm run generate:rules"
  },
  "rules": [
    {
      "id": "meaningful-names",
      "title": "Use Meaningful Names",
      "enabled": true,
      "severity": "low",
      "category": "best-practices",
      "recommendation": "Use descriptive names for variables, functions, and components. Avoid single letters unless in tight loop counters.",
      "codeExample": {
        "bad": "const x = getData(); const a = x.filter(u => u.age > 18);",
        "good": "const users = getData(); const adults = users.filter(user => user.age > 18);"
      }
    },
    {
      "id": "error-handling",
      "title": "Handle Errors Gracefully",
      "enabled": true,
      "severity": "high",
      "category": "best-practices",
      "recommendation": "Catch async errors, show user-friendly messages, and avoid leaking stack traces in UI.",
      "codeExample": {
        "bad": "const data = await fetchData();",
        "good": "try { const data = await fetchData(); } catch (error) { setError('Unable to load data'); reportError(error); }"
      }
    },
    {
      "id": "component-composition",
      "title": "Compose Small Components",
      "enabled": true,
      "severity": "medium",
      "category": "best-practices",
      "recommendation": "Split large components into focused, reusable pieces. Prefer composition over deep prop drilling.",
      "codeExample": {
        "bad": "// One 500-line component handling layout, data, and UI",
        "good": "// Compose with <UserHeader />, <UserContent />, <UserFooter />"
      }
    },
    {
      "id": "const-vs-let",
      "title": "Prefer const/let over var",
      "enabled": true,
      "severity": "low",
      "category": "best-practices",
      "patterns": [
        "var\\s+\\w+\\s*="
      ],
      "recommendation": "Use const by default, let when reassignment is required. Avoid var due to function scope and hoisting pitfalls.",
      "codeExample": {
        "bad": "var count = 0;",
        "good": "const count = 0; // or let if it changes"
      }
    },
    {
      "id": "avoid-prop-drilling",
      "title": "Avoid Prop Drilling",
      "enabled": true,
      "severity": "medium",
      "category": "best-practices",
      "recommendation": "Use Context or state libraries when props must cross many levels. Pass only what each component needs.",
      "codeExample": {
        "bad": "<App user={user} onThemeChange={setTheme} locale={locale} ...>",
        "good": "<UserProvider value={user}><ThemeProvider value={theme}>...</ThemeProvider></UserProvider>"
      }
    },
    {
      "id": "testing-coverage",
      "title": "Test Critical Paths",
      "enabled": true,
      "severity": "medium",
      "category": "best-practices",
      "recommendation": "Write tests for core flows, reducers, hooks, and components. Target at least 80% coverage on critical areas.",
      "codeExample": {
        "bad": "// No tests",
        "good": "// Vitest/Jest tests for reducers, hooks, and page flows"
      }
    },
    {
      "id": "documentation",
      "title": "Document Intent",
      "enabled": true,
      "severity": "low",
      "category": "best-practices",
      "recommendation": "Add short comments/JSDoc for complex logic, public APIs, and tricky decisions. Keep docs close to code.",
      "codeExample": {
        "bad": "function process(x, y) { return x + y; }",
        "good": "/** Adds tax to subtotal. */ function addTax(subtotal, rate) { return subtotal * (1 + rate); }"
      }
    },
    {
      "id": "avoid-deeply-nested",
      "title": "Limit Nesting",
      "enabled": true,
      "severity": "low",
      "category": "best-practices",
      "recommendation": "Keep branching shallow (â‰¤3 levels). Use early returns and helper functions to reduce indentation.",
      "codeExample": {
        "bad": "if (a) { if (b) { if (c) { doThing(); } } }",
        "good": "if (!a || !b || !c) return; doThing();"
      }
    },
    {
      "id": "dry-principle",
      "title": "Avoid Duplication",
      "enabled": true,
      "severity": "medium",
      "category": "best-practices",
      "recommendation": "Extract repeated UI and logic into components or utilities. Share validation, formatting, and fetch helpers.",
      "codeExample": {
        "bad": "// Same email validation in multiple forms",
        "good": "// reuse validateEmail() helper"
      }
    },
    {
      "id": "modern-hooks",
      "title": "Prefer Functional Components with Hooks",
      "enabled": true,
      "severity": "high",
      "category": "best-practices",
      "patterns": [
        "componentDidMount",
        "componentWillUnmount",
        "this.state"
      ],
      "recommendation": "Use functional components and modern hooks (useEffect/useMemo/useCallback/useReducer). Avoid legacy lifecycle methods and class state.",
      "codeExample": {
        "bad": "class MyComponent extends React.Component { componentDidMount() {} }",
        "good": "function MyComponent() { useEffect(() => {/*...*/}, []); }"
      }
    },
    {
      "id": "avoid-use-effect-data-fetching",
      "title": "Avoid useEffect for Data Fetching",
      "enabled": true,
      "severity": "high",
      "category": "best-practices",
      "recommendation": "Prefer data libraries (SWR/React Query) or loader patterns. Avoid fire-and-forget fetches in useEffect without abort/controllers.",
      "codeExample": {
        "bad": "useEffect(() => { fetch('/api/users').then(setUsers); }, []);",
        "good": "const { data: users } = useSWR('/api/users', fetcher);"
      }
    },
    {
      "id": "handle-loading-states",
      "title": "Handle Loading and Error States",
      "enabled": true,
      "severity": "medium",
      "category": "best-practices",
      "recommendation": "Always show loading/empty/error UI. Disable submit buttons while pending and surface actionable errors.",
      "codeExample": {
        "bad": "{data && <List data={data} />} // No loading/error handling",
        "good": "if (error) return <ErrorBanner />; if (!data) return <Spinner />; return <List data={data} />;"
      }
    },
    {
      "id": "performance-memo",
      "title": "Memoize Expensive Components",
      "enabled": true,
      "severity": "low",
      "category": "performance",
      "recommendation": "Use React.memo/useMemo/useCallback for expensive renders or stable callbacks. Measure before optimizing.",
      "codeExample": {
        "bad": "const UserCard = ({ user }) => <div>{user.name}</div>;",
        "good": "const UserCard = React.memo(({ user }) => <div>{user.name}</div>);"
      }
    },
    {
      "id": "code-splitting",
      "title": "Code Split Large Features",
      "enabled": true,
      "severity": "medium",
      "category": "performance",
      "recommendation": "Use React.lazy/dynamic imports for heavy, non-critical routes and admin panels to reduce initial bundle size.",
      "codeExample": {
        "bad": "import HeavyFeature from './HeavyFeature';",
        "good": "const HeavyFeature = React.lazy(() => import('./HeavyFeature'));"
      }
    },
    {
      "id": "lazy-loading-images",
      "title": "Lazy Load Offscreen Images",
      "enabled": true,
      "severity": "medium",
      "category": "performance",
      "recommendation": "Lazy load imagery below the fold and provide intrinsic sizes to avoid layout shifts.",
      "codeExample": {
        "bad": "<img src='hero-large.jpg' />",
        "good": "<img src='hero-large.jpg' loading='lazy' width='1200' height='600' alt='...' />"
      }
    },
    {
      "id": "bundle-analysis",
      "title": "Monitor Bundle Size",
      "enabled": true,
      "severity": "low",
      "category": "performance",
      "recommendation": "Track bundle size in CI. Keep initial JS lean; defer non-critical scripts.",
      "codeExample": {
        "bad": "// No size checks",
        "good": "// Run bundle analyzer in CI and gate on size budgets"
      }
    },
    {
      "id": "accessibility-alt-text",
      "title": "Provide Alt Text",
      "enabled": true,
      "severity": "high",
      "category": "accessibility",
      "patterns": [
        "<img[^>]*(?<!alt)[^>]*>"
      ],
      "recommendation": "All images need meaningful alt text (or empty alt for decorative images).",
      "codeExample": {
        "bad": "<img src='hero.jpg' />",
        "good": "<img src='hero.jpg' alt='Team celebrating successful project launch' />"
      }
    },
    {
      "id": "keyboard-navigation",
      "title": "Ensure Keyboard Navigation",
      "enabled": true,
      "severity": "high",
      "category": "accessibility",
      "recommendation": "All interactive elements must be focusable and operable via keyboard (Tab/Enter/Space/Esc).",
      "codeExample": {
        "bad": "<div onClick={handleClick}>Click</div>",
        "good": "<button onClick={handleClick}>Click</button>"
      }
    },
    {
      "id": "semantic-html",
      "title": "Use Semantic HTML",
      "enabled": true,
      "severity": "medium",
      "category": "accessibility",
      "recommendation": "Prefer semantic tags (button, nav, main, header, footer, article) over div/span for meaning and accessibility.",
      "codeExample": {
        "bad": "<div onClick={...}>Submit</div>",
        "good": "<button type='submit'>Submit</button>"
      }
    },
    {
      "id": "aria-labels",
      "title": "Add ARIA Labels to Custom Controls",
      "enabled": true,
      "severity": "medium",
      "category": "accessibility",
      "recommendation": "Use aria-label/aria-labelledby on non-native controls (icon buttons, custom inputs) to expose meaning to screen readers.",
      "codeExample": {
        "bad": "<div className='icon-button' onClick={...} />",
        "good": "<button aria-label='Close menu' onClick={...} />"
      }
    },
    {
      "id": "color-contrast",
      "title": "Maintain Color Contrast",
      "enabled": true,
      "severity": "medium",
      "category": "accessibility",
      "recommendation": "Meet WCAG contrast (4.5:1 for body text, 3:1 for large text/icons). Verify with automated checks.",
      "codeExample": {
        "bad": "// Light gray text on white",
        "good": "// Dark text on light background or vice-versa"
      }
    },
    {
      "id": "secure-storage",
      "title": "Do Not Store Secrets in localStorage",
      "enabled": true,
      "severity": "critical",
      "category": "security",
      "recommendation": "Never store tokens, passwords, or PII in localStorage/sessionStorage. Use httpOnly, secure, sameSite cookies managed by the server.",
      "codeExample": {
        "bad": "localStorage.setItem('token', accessToken);",
        "good": "// Set httpOnly, secure, sameSite cookie from server response; read via cookie on requests"
      }
    },
    {
      "id": "encrypt-sensitive-data",
      "title": "Protect Sensitive Data",
      "enabled": true,
      "severity": "critical",
      "category": "security",
      "recommendation": "Do not store or transmit plaintext secrets/PII. Encrypt at rest, use TLS in transit, and mask values in UI/logs.",
      "codeExample": {
        "bad": "console.log('card', cardNumber); localStorage.setItem('ssn', ssn);",
        "good": "// Mask values in UI/logs; only store encrypted blobs; rely on server-side vaults/keystores"
      }
    },
    {
      "id": "password-strength",
      "title": "Enforce Strong Password Inputs",
      "enabled": true,
      "severity": "high",
      "category": "security",
      "recommendation": "Password fields must use type='password', minimum length (e.g., 12), and pattern checks (upper/lower/number/symbol). Never prefill or echo passwords.",
      "codeExample": {
        "bad": "<input name='password' type='text' />",
        "good": "<input name='password' type='password' pattern='(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&]).{12,}' required />"
      }
    },
    {
      "id": "avoid-logging-secrets",
      "title": "Do Not Log Secrets or PII",
      "enabled": true,
      "severity": "high",
      "category": "security",
      "recommendation": "Never log tokens, passwords, keys, or personal data. Scrub/redact sensitive fields before logging and disable verbose logs in production.",
      "codeExample": {
        "bad": "console.log('token', token);",
        "good": "log.info('login attempt', { userId, status: 'success' }); // no secrets"
      }
    },
    {
      "id": "validate-and-sanitize",
      "title": "Validate and Sanitize Inputs",
      "enabled": true,
      "severity": "high",
      "category": "security",
      "recommendation": "Validate user input on both client and server. Sanitize text rendered into the DOM to prevent XSS and injection.",
      "codeExample": {
        "bad": "setState({ bio: userInput }); // unvalidated",
        "good": "const schema = z.object({ bio: z.string().max(280) }); const { bio } = schema.parse(formData); setState({ bio });"
      }
    }
  ]
}
